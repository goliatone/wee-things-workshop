<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>WeeThings</title>
		<style>
			body {
	font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
h1, h2, h3 {
	font-weight: 400;
	margin-bottom: 0;
}
.remark-slide-content h1 { font-size: 3em; }
.remark-slide-content h2 { font-size: 2em; }
.remark-slide-content h3 { font-size: 1.6em; }
.footnote {
	position: absolute;
	bottom: 3em;
}
li p { line-height: 1.25em; }
.red { color: #fa0000; }
.large { font-size: 2em; }
a, a > code {
	color: rgb(249, 38, 114);
	text-decoration: none;
}
code {
	background: none repeat scroll 0 0 #F8F8FF;
  border: 1px solid #DEDEDE;
  border-radius: 3px 	;
  padding: 0 0.2em;
}
.remark-code, .remark-inline-code { font-family: "Bitstream Vera Sans Mono", "Courier", monospace; }
.remark-code-line-highlighted     { background-color: #373832; }
.pull-left {
	float: left;
	width: 47%;
}
.pull-right {
	float: right;
	width: 47%;
}
.pull-right ~ p {
	clear: both;
}
#slideshow .slide .content code {
	font-size: 0.8em;
}
#slideshow .slide .content pre code {
	font-size: 0.9em;
	padding: 15px;
}
.main-title, .title {
	background: #272822;
	color: #777872;
	text-shadow: 0 0 20px #333;
}
.title h1, .title h2, .main-title h1, .main-title h2 {
	color: #f3f3f3;
	line-height: 0.8em;
}
/* Custom */
.remark-code {
	display: block;
	padding: 0.5em;
}

#preloader {
	position:absolute;
	width:100%;
	height:100%;
	top:0;
	left:0;
	z-index:999999;
	background-color: #212121;
	text-align: center;
	margin: 0 auto;
}
#source{
	visibility: hidden;
}

		</style>
	</head>
	<body>
		<textarea id="source">
class: center, middle, main-title

# WeeThings
<h3>A workshop of little connected things.</h3>

Emiliano Burgos

R&amp;D | <a href="http://wework.com">wework.com</a> | <a href="mailto:emiliano@wework.com">emiliano@wework.com</a>

???
Please, everyone, introduce yourselves.
Also, what&#39;s our level?
Ok, we have a gitter set up for the workshop.


---
class: center, middle, main-title

# Gitter IM
[wee-things-workshop](https://github.com/goliatone/wee-things-workshop)

https://gitter.im/goliatone/wee-things-workshop

???
Using this we can send code snippets and links around. It&#39;s pretty helpful.


---
class: center, middle, main-title

# Github Repository
[WeeThings](https://github.com/goliatone/wee-things-workshop)

https://github.com/goliatone/wee-things-workshop

???


---
## Goals
<span></span>
???
This workshop has 3 goals.


---
## Goals

- Familiarize ourselves with the NodeMCU development board.


---
## Goals

- Familiarize ourselves with the NodeMCU development board.
- Setup a work environment.


---
## Goals

- Familiarize ourselves with the NodeMCU development board.
- Setup a work environment.
- Be able to load and execute code.
???
It might not look like much, but oftentimes this is the hardest thing to accomplish on our own. When we are starting, hardware can be daunting. It definitively was for me...


---
## WeeThings
<h4>Outline</h4>
???
This workshop has 3 parts to it, introduction to Microcontrollers, setup, and code.


---
## WeeThings
<h4>Outline</h4>


- Microcontrollers


---
## WeeThings
<h4>Outline</h4>


- Microcontrollers
 - ESP8266


---
## WeeThings
<h4>Outline</h4>


- Microcontrollers
 - ESP8266
- Setup
???
Usually the hardest thing to get right without help.


---
## WeeThings
<h4>Outline</h4>


- Microcontrollers
 - ESP8266
- Setup
 - Hardware


---
## WeeThings
<h4>Outline</h4>


- Microcontrollers
 - ESP8266
- Setup
 - Hardware
 - Software


---
## WeeThings
<h4>Outline</h4>


- Microcontrollers
 - ESP8266
- Setup
 - Hardware
 - Software
- Code


---
## WeeThings
<h4>Outline</h4>


- Microcontrollers
 - ESP8266
- Setup
 - Hardware
 - Software
- Code
 - Hello, World!


---
## WeeThings
<h4>Outline</h4>


- Microcontrollers
 - ESP8266
- Setup
 - Hardware
 - Software
- Code
 - Hello, World!
 - Hello, Blink!


---
## WeeThings
<h4>Outline</h4>


- Microcontrollers
 - ESP8266
- Setup
 - Hardware
 - Software
- Code
 - Hello, World!
 - Hello, Blink!
 - Hello, WiFi!


---
## WeeThings
<h4>Outline</h4>


- Microcontrollers
 - ESP8266
- Setup
 - Hardware
 - Software
- Code
 - Hello, World!
 - Hello, Blink!
 - Hello, WiFi!
 - WiFi, Blink!


---
## WeeThings
<h4>Outline</h4>


- Microcontrollers
 - ESP8266
- Setup
 - Hardware
 - Software
- Code
 - Hello, World!
 - Hello, Blink!
 - Hello, WiFi!
 - WiFi, Blink!

#### Requirements:

---
## WeeThings
<h4>Outline</h4>


- Microcontrollers
 - ESP8266
- Setup
 - Hardware
 - Software
- Code
 - Hello, World!
 - Hello, Blink!
 - Hello, WiFi!
 - WiFi, Blink!

#### Requirements:

- Basic programming knowledge
???
We will be using Terminal a lot. The ESP8266 has a C SDK, software development kit. We are going to install different firmware- think of it as installing a different OS on a computer.


---
## WeeThings
<h4>Outline</h4>


- Microcontrollers
 - ESP8266
- Setup
 - Hardware
 - Software
- Code
 - Hello, World!
 - Hello, Blink!
 - Hello, WiFi!
 - WiFi, Blink!

#### Requirements:

- Basic programming knowledge
- Mac OS
???
More than anything Mac OS is a requirement right now because is the only platform we&#39;ve used so far. In theory, it should work on a Windows machine.


---
## WeeThings
<h4>Outline</h4>


- Microcontrollers
 - ESP8266
- Setup
 - Hardware
 - Software
- Code
 - Hello, World!
 - Hello, Blink!
 - Hello, WiFi!
 - WiFi, Blink!

#### Requirements:

- Basic programming knowledge
- Mac OS

**NOTE**: Drivers require computer restart
???
SO! Probably we want to install the drivers first?


---
class: center, middle, main-title

# Microcontrollers

---
## Introduction to microcontrollers
*Wikipedia: [Microcontroller](https://en.wikipedia.org/wiki/Microcontroller)*

> A microcontroller is a small computer on a single integrated circuit containing a processor core, memory, and programmable input/output peripherals.


---
## Introduction to microcontrollers
*Arduino Uno image courtesy of Fritzing*
![nodemcu](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/microcontroller-001.png)
???
Most people are introduced to microcontrollers via the Arduino. Here you can see an Arduino UNO and some peripherals.

The Arduino was a breakthrough in electronics, it made an affordable and easy to use microcontroller, with a big community around.

However, there are a few things that I, personally, don&#39;t like. Mainly it&#39;s lack of built in WiFi support. Which it was ok when it came out, but nowadays mostly everything useful happens online.

And personally, I find it to cumbersome to quickly prototype things in C++... also, it&#39;s <b>form factor and price</b> are not ideal.


---
## Introduction to microcontrollers
<h4>ESP8266</h4>
![ESP8266](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/esp8266-001.png)


---
## Introduction to microcontrollers
<h4>ESP8266</h4>
![ESP8266](../images/esp8266-002.jpg)


---
## Introduction to microcontrollers
<h4>NodeMCU</h4>
![nodemcu](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/nodemcu-001.jpg)


---
class: center, middle, main-title

# Setup

---
## NodeMCU
![nodemcu](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/nodemcu-001.jpg)


---
## node-esp cli tool
![node-esp](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/esp-tool-001.png?a)


---
## Lua programming language
 <code data-gist-id="558e5f9edb57ec8f65e8"></code>


---
class: center, middle, main-title

# Let's get started
???
Let&#39;s make sure that we all have the required hardware.


---
## Setup (hardware)

- NodeMCU dev board

![nodemcu](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/nodemcu-001.jpg)


---
## Setup (hardware)

- Micro USB cable
![microusb](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/microusb-cable-001.jpg)


---
## Setup (software)

- Drivers
- node-esp
- Firmware

Clone repo:

```
$ git clone git@github.com:goliatone/wee-things-workshop.git
```
???


---
class: center, middle, main-title

# Project Directory

---
## Project Directory
![bootstrap](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/project-directory-001.png)
???
Open the directory and look at the contents and structure.
From now on, we will be forking from this directory and the next slides will make reference to directories like **bin** or **code**.


---
class: center, middle, main-title

# Drivers
<h3>Requires computer restart :(</h3>


---
## Drivers

- Project directory, inside **bin** folder.
- https://goo.gl/SS1YoE


---
## Drivers
![drives](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/drivers-siliconlabs-001.png)


---
class: center, middle, main-title

# node-esp
<h3>Communication with NodeMCU</h3>

???
The previous version of this workshop used ESPLorer, which is a Java based IDE. What we learnt pretty quickly was that we spent most of the time figuring out how to install Java, or update Java on each of the attendees machines. The rest of the time was about how to use the IDE... it did not make much sense.

So, I did what any software Engineer would do. I decided to build a better a tool...
node-esp is a terminal application that let&#39;s you interact with a NodeMCU board. You can upload files, execute them, output debug information to the screen.


---
## node-esp
Install:

```
$ npm i -g node-esp
```
Need SiLabs drivers installed:

```
$ esp port list
```
Set port name:

```
$ esp port set /dev/cu.SLAB_USBtoUART
```

---
## node-esp
![nodemcu](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/esp-tool-002.png)


---
class: center, middle, main-title

# Flashing NodeMCU
<h3>Loading NodeMCU firmware</h3>

???
In this step, we are going to flash our devkit with the NodeMCU binaries downloaded before so we can start loading programs to the board. It sounds intimidating, but it&#39;s quite simple actually, think of it as upgrading the operating system on a computer.


---
## Flashing NodeMCU
Hold down the board&#39;s **FLASH** button and press the **RST** button at the same time.

From bin directory:

```
$ esp flash nodemcu_integer_0.9.6-dev_20150704.bin
```

---
## Flashing NodeMCU
![nodemcu](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/esp-tool-003.png)


---
class: center, middle, main-title

# Hello, World!
<h3>NodeMCU programming in Lua</h3>


---
## Hello, World!
```lua
print("Hello, World!")
```

---
## Hello, World!
```lua
print("Hello, World!")
```
Send command using node-esp:
![nodemcu](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/esp-tool-004.png)


---
## Hello, World!
```lua
print("Hello, World!")
```
Create file and upload using node-esp:
![nodemcu](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/esp-tool-005.png)


---
## Hello, World!
![nodemcu](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/esp-tool-006.png)

<!--
SHOW IMAGES STEP BY STEP, LOAD & EXEC CODE
-->

---
class: center, middle, main-title

# Hello, Blink!

---
## Hello, Blink!
**https://goo.gl/Kbw7Ep**

<code data-gist-id="558e5f9edb57ec8f65e8"></code>


---
## Hello, Blink!
Create file in **code** directory, name it **hello_blink.lua**

```
$ esp file write hello_blink.lua
```
```
$ esp file list
```
Execute file:

```
$ esp file execute hello_blink.lua
```

---
## Hello, Blink!
```
$ esp restart
Board restarted
```
???
What we are doing is, first we are writing the file to the board and then we are loading the file into memory, and execute it. If we have to modify a file that is currently loaded i memory, we need to restart the board in order for the changes to take effect


---
class: center, middle, main-title

# Hello, WiFi!

---
## Hello, WiFi!
**https://goo.gl/7TftH2**

<code data-gist-id="7ca042f7cc421fe84447"></code>


---
## Hello, WiFi!
Create file in **code** directory, name it **hello_wifi.lua**

```
$ esp file write hello_wifi.lua
```
```
$ esp file list
```

---
## Hello, WiFi!
```
$ esp file execute hello_wifi.lua
```
```
Wifi mode:     2
MAC:     18:fe:34:f1:fa:df

Created WiFi network:
Network Name
- SSID:     WEE_THINGS_15858399
Security: WPA/WPA 2 Personal
- PWD:     weething

IP:     192.168.4.1    255.255.255.0    192.168.4.1
```

---
## Hello, WiFi!
Connect to Access Point:
![nodemcu](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/hello-wifi-001.png)


---
class: center, middle, main-title

# WiFi, Blink!

---
## WiFi, Blink!
**https://goo.gl/KwAFu4**

<code data-gist-id="001a3b147ddfee3e8451"></code>


---
## WiFi, Blink!
Create file in **code** directory, name it **wifi_blink.lua**

```
$ esp file write wifi_blink.lua
```
```
$ esp file list
```

---
## WiFi, Blink!
```
$ esp file execute wifi_blink.lua
```
```
Wifi mode:     2
MAC:     18:fe:34:f1:fa:df

Created WiFi network:
Network Name
- SSID:     WEE_THINGS_15858399
Security: WPA/WPA 2 Personal
- PWD:     weething

IP:     192.168.4.1    255.255.255.0    192.168.4.1
```

---
## WiFi, Blink!
Browse to:

```
http://192.168.4.1/
```

---
## WiFi, Blink!
![nodemcu](https://raw.githubusercontent.com/goliatone/wee-things-workshop/master/images/wifi-blink-001.png)


---
class: center, middle, main-title

# Thank you.
Emiliano Burgos

<a href="mailto:emiliano@wework.com">emiliano@wework.com</a>

<!-- samples
http://www.slideshare.net/JulinDavidDuque/javascript-robotics-a-nodebots-show
http://www.slideshare.net/coolsimo/how-to-structure-a-presentation-a-guide-with-examples
http://www.slideshare.net/msimonehouston/nodebots-50566451
-->

		</textarea>
		<script src="js/remark-latest.min.js"></script>
        <script src="js/jquery-2.1.4.min.js"></script>
    	<script src="js/gist-embed.min.js"></script>
		<script>
			var slideshow = remark.create();
            $(document).ready(function(){
				$('img').on('load',function(){
				    var css;
				    var ratio=$(this).width() / $(this).height();
				    var pratio=$(this).parent().width() / $(this).parent().height();
				    if (ratio<pratio) css={width:'auto', height:'100%'};
				    else css={width:'100%', height:'auto'};
				    $(this).css(css);
				});
                hideLoadingLayer();
    			function hideLoadingLayer(){
    				document.getElementById('preloader').style.visibility = 'hidden';
    				document.getElementById('source').style.visibility = 'normal';
    			}
			});
		</script>
		<script></script>
	</body>
</html>
