(function(b){function a(d){var c=[],e,g;if(typeof d==="number"){c.push(d)}else{g=d.split(",");for(var h=0;h<g.length;h++){e=g[h].split("-");if(e.length===2){for(var f=parseInt(e[0],10);f<=e[1];f++){c.push(f)}}else{if(e.length===1){c.push(parseInt(e[0],10))}}}}return c}b.fn.gist=function(){return this.each(function(){var f=b(this),e,c,h,n,i,l,k,d,g,m,j={};f.css("display","block");e=f.data("gist-id")||"";h=f.data("gist-file");k=f.data("gist-hide-footer")===true;d=f.data("gist-hide-line-numbers")===true;n=f.data("gist-line");l=f.data("gist-highlight-line");m=f.data("gist-show-spinner")===true;if(m){g=false}else{g=f.data("gist-show-loading")!==undefined?f.data("gist-show-loading"):true}if(h){j.file=h}if(!e){return false}c="https://gist.github.com/"+e+".json";i="Loading gist "+c+(j.file?", file: "+j.file:"")+"...";if(g){f.html(i)}if(m){f.html('<img style="display:block;margin-left:auto;margin-right:auto"  alt="'+i+'" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif">')}b.ajax({url:c,data:j,dataType:"jsonp",timeout:10000,success:function(q){var t,s,p,r,o;if(q&&q.div){if(q.stylesheet){if(q.stylesheet.indexOf("<link")===0){q.stylesheet=q.stylesheet.replace(/\\/g,"").match(/href=\"([^\s]*)\"/)[1]}else{if(q.stylesheet.indexOf("http")!==0){if(q.stylesheet.indexOf("/")!==0){q.stylesheet="/"+q.stylesheet}q.stylesheet="https://gist.github.com"+q.stylesheet}}}if(q.stylesheet&&b('link[href="'+q.stylesheet+'"]').length===0){t=document.createElement("link");s=document.getElementsByTagName("head")[0];t.type="text/css";t.rel="stylesheet";t.href=q.stylesheet;s.insertBefore(t,s.firstChild)}o=b(q.div);o.removeAttr("id");f.html("").append(o);if(l){r=a(l);o.find("td.line-data").css({width:"100%"});o.find(".js-file-line").each(function(u){if(b.inArray(u+1,r)!==-1){b(this).css({"background-color":"rgb(255, 255, 204)"})}})}if(n){p=a(n);o.find(".js-file-line").each(function(u){if((b.inArray(u+1,p))===-1){b(this).parent().remove()}})}if(k){o.find(".gist-meta").remove();o.find(".gist-data").css("border-bottom","0px");o.find(".gist-file").css("border-bottom","1px solid #ddd")}if(d){o.find(".js-line-number").remove()}}else{f.html("Failed loading gist "+c)}},error:function(o,p){f.html("Failed loading gist "+c+": "+p)}})})};b(function(){b("[data-gist-id]").gist()})})(jQuery);